% --------------------------------------------------------------------------------
% Single-Variable Calculus
% Syed, Danial Haseeb
% TeX Style Sheet
% --------------------------------------------------------------------------------
\NeedsTeXFormat{LaTeX2e}    % TeX Format Requirement
\ProvidesPackage{stylesheet}        % Package Name
% --------------------------------------------------------------------------------
% Unicode Input
\RequirePackage[utf8]{inputenc}

% --------------------------------------------------------------------------------
% Images
\RequirePackage{graphicx}

\graphicspath
{
  {./images}
  {../images}
  % Declare additional graphics locations here
}

% --------------------------------------------------------------------------------
% Colours
\RequirePackage[svgnames]{xcolor}

%% MIT
\definecolor {MITred}     {RGB} { 163 , 031 , 052 }
\definecolor {MITgreen}   {RGB} { 052 , 163 , 031 }
\definecolor {MITblue}    {RGB} { 031 , 052 , 163 }
\definecolor {MITcyan}    {RGB} { 031 , 163 , 142 }
\definecolor {MITmagenta} {RGB} { 142 , 031 , 163 }
\definecolor {MITyellow}  {RGB} { 163 , 142 , 031 }
\definecolor {MITgray}    {RGB} { 138 , 139 , 140 }

% --------------------------------------------------------------------------------
% Mathematical Packages
\RequirePackage
{
  amsthm,
  amssymb,
  mathtools,
  thmtools,
  siunitx,
  cancel
}

% --------------------------------------------------------------------------------
% Drawing Library
\RequirePackage{tikz}

\usetikzlibrary
{
  positioning,
  graphs,
  angles,
  quotes,
  shapes,
  arrows,
  scopes,
  babel,
  calc
}

% --------------------------------------------------------------------------------
% Code Highlighting
%\usepackage{minted}
%
%\usemintedstyle{xcode}
%
%\setminted
%{
%  autogobble,
%  mathescape,
%
%  frame      = lines,
%  framesep   = 11pt,
%  breaklines = true
%}

% --------------------------------------------------------------------------------
% Bibliography
%\usepackage[backend=biber,style=apa]{biblatex}

%\addbibresource{sample.bib}

% --------------------------------------------------------------------------------
% Infrastructure Packages
\RequirePackage
{
  blindtext,  % Lipsum
  multirow,   % Merging Rows in Tables
  subfiles,   % File Management
  hyperref    % Hyperlinks
}

% --------------------------------------------------------------------------------
% Metadata
\hypersetup
{
  hidelinks,
  pdftitle    = Single-Variable Calculus,
  pdfauthor   = Syed Danial Haseeb,
  pdfsubject  = Principia Mathematica,
  pdfcreator  = LaTeX2e,
  pdfkeywords = calculus
}

% --------------------------------------------------------------------------------
% Pages
\makepagestyle{SD}
\nouppercaseheads
\addtopsmarks{SD}{}{\createmark{chapter}{both}{shownumber}{}{. \ }}
\makeoddhead{SD}{\scshape\rightmark}{}{\thepage}
\makeheadrule{SD}{\textwidth}{\normalrulethickness}
\pagestyle{SD}

% --------------------------------------------------------------------------------
% Paragraph Indent

\nonzeroparskip
\setlength{\parindent}{0pt}

% --------------------------------------------------------------------------------
% Widow Management

\setlength{\topskip}{1.6\topskip}
\checkandfixthelayout
\sloppybottom

% --------------------------------------------------------------------------------
% Float Locations

\setfloatlocations{figure}{!htbp}
\setfloatlocations{table}{!htbp}

% --------------------------------------------------------------------------------
% Contents

%% Dotted Leaders
\renewcommand{\cftdotsep}{\cftnodots}

%% Fit Roman Numerals
\renewcommand{\cftpartnumwidth}{5ex}
\renewcommand{\cftchapternumwidth}{\cftpartnumwidth}
\renewcommand{\cftsectionnumwidth}{\cftpartnumwidth}
\renewcommand{\cftsectionindent}{\dimexpr \cftpartindent + \cftpartnumwidth}

%% Fonts
\renewcommand{\cftpartfont}{\large\scshape\color{MITgray}}
\renewcommand{\cftchapterfont}{\scshape}

%% Page Numbers

%%% Off
\cftpagenumbersoff{part}

%%% Placement
\renewcommand{\cftchapterleader}{\quad}
\renewcommand{\cftchapterafterpnum}{\cftparfillskip}
\renewcommand{\cftsectionleader}{\quad}
\renewcommand{\cftsectionafterpnum}{\cftparfillskip}

%%% Style
\renewcommand{\cftchapterpagefont}{\normalfont\color{MITblue}}
\renewcommand{\cftsectionpagefont}{\normalfont\color{MITblue}}

% --------------------------------------------------------------------------------
% Parts

\aliaspagestyle{part}{empty}
\renewcommand{\partnamefont}{\normalfont\huge\color{MITgray}\scshape}
\renewcommand{\partnumfont}{\normalfont\huge\color{MITgray}}
\renewcommand{\parttitlefont}{\normalfont\Huge\color{MITred}\scshape}

% --------------------------------------------------------------------------------
% Chapters

\makechapterstyle{SD}
{
  \renewcommand{\chapterheadstart}{}
  \renewcommand{\printchaptertitle}[1]{\color{MITred}\hrule\vskip\onelineskip\chaptitlefont ##1}
  \renewcommand{\afterchaptertitle}{\color{MITred}\vskip\onelineskip\hrule\vskip\afterchapskip}
  \renewcommand{\chapnamefont}{\normalfont\huge\color{MITgray}\scshape}
  \renewcommand{\chapnumfont}{\normalfont\huge\color{MITgray}}
  \renewcommand{\chaptitlefont}{\normalfont\Huge\color{MITred}\scshape}
}
\chapterstyle{SD}

% --------------------------------------------------------------------------------
% (Sub)Sections
\setsecheadstyle{\Large\color{MITred}\scshape}
\setsubsecheadstyle{\large\color{MITred}\scshape}
\setsubsubsecheadstyle{\scshape\raggedright}
\setparaheadstyle{\scshape}
\setsechook{\setsecnumformat{{\normalfont\Large\color{MITgray}\thesection\quad}}}
\setsubsechook{\setsecnumformat{{\normalfont\Large\color{MITgray}\thesection\quad}}}

% --------------------------------------------------------------------------------
% Footnotes
\renewcommand*{\@makefnmark}{\hbox{\textsuperscript{\color{MITgray}\@thefnmark}}}
\setlength{\footmarkwidth}{1.8em}
\setlength{\footmarksep}{0em}
\footmarkstyle{#1\hfill}
\renewcommand*{\footnoterule}
{%
  \kern-3pt%
  \color{MITgray}\hrule width 0.4\columnwidth
  \kern 2.6pt%
}

% --------------------------------------------------------------------------------
% Theorems

\newtheorem{thm}{Theorem}[chapter]        % Theorem
\newtheorem{lem}[thm]{Lemma}              % Lemma
\newtheorem{prop}[thm]{Proposition}       % Proposition
\newtheorem*{cor}{Corollary}              % Corollary

\newtheorem*{thm*}{Theorem}               % Theorem*
\newtheorem*{lem*}{Lemma}                 % Lemma*
\newtheorem*{prop*}{Proposition}          % Proposition*

%% Definition
\theoremstyle{definition}
\newtheorem{defn}{Definition}[chapter]    % Definition
\newtheorem{exmp}{Example}[chapter]       % Example
\newtheorem{xca}[exmp]{Exercise}          % Exercise

\newtheorem*{defn*}{Definition}           % Definition*
\newtheorem*{exmp*}{Example}              % Example*
\newtheorem*{xca*}{Exercise}              % Exercise*

%% Remark
\theoremstyle{remark}
\newtheorem*{rem}{Remark}                 % Remark
\newtheorem*{case*}{Case}                 % Case*

%% Custom Theorem
%\newtheoremstyle{test}
%{5pt}      % Space Above
%{5pt}      % Space Below
%{}         % Body Font
%{}         % Indent Amount
%{\scshape} % Head Font
%{}         % Punctuation After Head
%{.5em}     % Space After Head
%{}         % Head Spec

\declaretheorem {theorem}      [parent = chapter]
\declaretheorem {theorem*}     [numbered = no, name = Theorem]

\declaretheorem {lemma}        [sibling = theorem]
\declaretheorem {lemma*}       [numbered = no, name = Lemma]

\declaretheorem {proposition}  [sibling = theorem]
\declaretheorem {proposition*} [numbered = no, name = Proposition] 

\declaretheorem {corollary}    [numbered = no]

\declaretheorem {definition}   [style = definition]
\declaretheorem {definition*}  [style = definition, numbered = no, name = Definition]

\declaretheorem {example}      [style = definition, parent = chapter]
\declaretheorem {example*}     [style = definition, numbered = no, name = Example]

\declaretheorem {exercise}     [style = definition, sibling = example]
\declaretheorem {exercise*}    [style = definition, numbered = no, name = Exercise]

\declaretheorem {remark}       [style = remark, numbered = no]

\declaretheorem {note}         [style = remark, numbered = no]

\declaretheorem {case}         [style = remark]
% --------------------------------------------------------------------------------
\endinput